```{r}
                                        # Install packages if needed
                                        # install.packages("shiny")
                                        # install.packages("DT")

library(shiny)
library(DT)

ui <- fluidPage(

    titlePanel("Data Entry App"),

    sidebarLayout(
        sidebarPanel(
            textInput("name", "Name"),
            numericInput("age", "Age", value = NA, min = 0, max = 120),
            selectInput("gender", "Gender", choices = c("Male", "Female", "Other")),
            selectInput("belief", "Belief", choices = c("Yes", "No", "Other")),
            selectInput("ph", "Physical", choices = c("Yes", "No", "Other")),
            selectInput("mh", "Mental", choices = c("Yes", "No", "Other")),
            actionButton("add", "Add Record", class = "btn-primary"),
            hr(),
            downloadButton("downloadData", "Download CSV")
        ),

        mainPanel(
            DTOutput("table")
        )
    )
)

server <- function(input, output, session) {

                                        # A reactive data frame stored in memory
    values <- reactiveVal(data.frame(
        Name = character(),
        Age = numeric(),
        Gender = character(),
        Belief = character(),
        Physical = character(),
        Mental = character(),
        stringsAsFactors = FALSE
    ))

                                        # Add a new record when button is clicked
    observeEvent(input$add, {

        new_row <- data.frame(
            Name = input$name,
            Age = input$age,
            Gender = input$gender,
            Belief = input$belief,
            Physical = input$ph,
            Mental = input$mh,
            stringsAsFactors = FALSE
        )

                                        # Append to existing data
        updated <- rbind(values(), new_row)
        values(updated)
    })

                                        # Show the table
    output$table <- renderDT({
        datatable(values(), options = list(pageLength = 5))
    })

                                        # Download handler
    output$downloadData <- downloadHandler(
        filename = function() { "data_entry.csv" },
        content = function(file) {
            write.csv(values(), file, row.names = FALSE)
        }
    )
}

shinyApp(ui, server)

```

